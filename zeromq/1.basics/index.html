<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>1.basics | The Computer Programmer, Nolleh</title>
<meta name="keywords" content="MQ, zeromq">
<meta name="description" content="다음 번역 Chapter 1 - Basics Fixing The World 프로그래밍의 물리요, 과학은: 사람들이 쉽게 이해하고 사용할 수 있는 빌딩블록을 만들고 함께 큰 문제를 해결하는 데에 있다.
우리는 연결되어 있는 세상에 살고 있고 현대의 소프트웨어는 세상을 안내한다.
하지만 데이터와 지식들은 클라우드와 개인 컴퓨터에 존재하고 인터넷은 &lsquo;연결된&rsquo; 코드의 잠재성을 제안했지만
현실은 많은 흥미로운 문제들(건강/교육/경제/..)이 코드를 &lsquo;연결&rsquo; 할 방법이 없기 때문에 많은 지식(brain) 을 연결하지 못해 해결되지 못한 채로 남아있다.
IETF 표준들과같은 많은 노력으로 코드를 연결하기 위한 시도들이 행해졌다.">
<meta name="author" content="nolleh">
<link rel="canonical" href="https://nolleh.github.io/zeromq/1.basics/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://nolleh.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://nolleh.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://nolleh.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://nolleh.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://nolleh.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-102565363-1', 'auto');
	
	ga('send', 'pageview');
}
</script><meta property="og:title" content="1.basics" />
<meta property="og:description" content="다음 번역 Chapter 1 - Basics Fixing The World 프로그래밍의 물리요, 과학은: 사람들이 쉽게 이해하고 사용할 수 있는 빌딩블록을 만들고 함께 큰 문제를 해결하는 데에 있다.
우리는 연결되어 있는 세상에 살고 있고 현대의 소프트웨어는 세상을 안내한다.
하지만 데이터와 지식들은 클라우드와 개인 컴퓨터에 존재하고 인터넷은 &lsquo;연결된&rsquo; 코드의 잠재성을 제안했지만
현실은 많은 흥미로운 문제들(건강/교육/경제/..)이 코드를 &lsquo;연결&rsquo; 할 방법이 없기 때문에 많은 지식(brain) 을 연결하지 못해 해결되지 못한 채로 남아있다.
IETF 표준들과같은 많은 노력으로 코드를 연결하기 위한 시도들이 행해졌다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nolleh.github.io/zeromq/1.basics/" /><meta property="article:section" content="zeromq" />
<meta property="article:published_time" content="2024-05-22T21:37:29+09:00" />
<meta property="article:modified_time" content="2024-05-22T21:37:29+09:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="1.basics"/>
<meta name="twitter:description" content="다음 번역 Chapter 1 - Basics Fixing The World 프로그래밍의 물리요, 과학은: 사람들이 쉽게 이해하고 사용할 수 있는 빌딩블록을 만들고 함께 큰 문제를 해결하는 데에 있다.
우리는 연결되어 있는 세상에 살고 있고 현대의 소프트웨어는 세상을 안내한다.
하지만 데이터와 지식들은 클라우드와 개인 컴퓨터에 존재하고 인터넷은 &lsquo;연결된&rsquo; 코드의 잠재성을 제안했지만
현실은 많은 흥미로운 문제들(건강/교육/경제/..)이 코드를 &lsquo;연결&rsquo; 할 방법이 없기 때문에 많은 지식(brain) 을 연결하지 못해 해결되지 못한 채로 남아있다.
IETF 표준들과같은 많은 노력으로 코드를 연결하기 위한 시도들이 행해졌다."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Zeromqs",
      "item": "https://nolleh.github.io/zeromq/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "1.basics",
      "item": "https://nolleh.github.io/zeromq/1.basics/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "1.basics",
  "name": "1.basics",
  "description": "다음 번역 Chapter 1 - Basics Fixing The World 프로그래밍의 물리요, 과학은: 사람들이 쉽게 이해하고 사용할 수 있는 빌딩블록을 만들고 함께 큰 문제를 해결하는 데에 있다.\n우리는 연결되어 있는 세상에 살고 있고 현대의 소프트웨어는 세상을 안내한다.\n하지만 데이터와 지식들은 클라우드와 개인 컴퓨터에 존재하고 인터넷은 \u0026lsquo;연결된\u0026rsquo; 코드의 잠재성을 제안했지만\n현실은 많은 흥미로운 문제들(건강/교육/경제/..)이 코드를 \u0026lsquo;연결\u0026rsquo; 할 방법이 없기 때문에 많은 지식(brain) 을 연결하지 못해 해결되지 못한 채로 남아있다.\nIETF 표준들과같은 많은 노력으로 코드를 연결하기 위한 시도들이 행해졌다.",
  "keywords": [
    "MQ", "zeromq"
  ],
  "articleBody": "다음 번역 Chapter 1 - Basics Fixing The World 프로그래밍의 물리요, 과학은: 사람들이 쉽게 이해하고 사용할 수 있는 빌딩블록을 만들고 함께 큰 문제를 해결하는 데에 있다.\n우리는 연결되어 있는 세상에 살고 있고 현대의 소프트웨어는 세상을 안내한다.\n하지만 데이터와 지식들은 클라우드와 개인 컴퓨터에 존재하고 인터넷은 ‘연결된’ 코드의 잠재성을 제안했지만\n현실은 많은 흥미로운 문제들(건강/교육/경제/..)이 코드를 ‘연결’ 할 방법이 없기 때문에 많은 지식(brain) 을 연결하지 못해 해결되지 못한 채로 남아있다.\nIETF 표준들과같은 많은 노력으로 코드를 연결하기 위한 시도들이 행해졌다. 어플리케이션 개발자들은 HTTP 를 하나의 솔루션으로 사용하여 ‘간단한’ 문제에는 활용할 수 있겠지만\n이것은 개발자들과 아키텍트들이 큰서버를 생각하고 멍청한 클라이언트들을 구성하도록 격려하면서 문제를 더 악화했다.\n그래서, 현재의 사람들은 여전히 raw UDP 와 raw TCP를 사용한다. 이는 고통스럽고, 느리고, 확장하기 어려우며 중앙화가 필수적이다. 분산P2P 아키텍쳐는 업무를 위해서가아니라대부분 play 를 위해 사용된다. 스카이프나 비트토렌트를 데이터를 교환하기위해 사용하는 어플리케이션이 몇이나 되겠는가?\n이는 다시 프로그래밍의 과학을 다시우리에게 들이민다. 세상을 고치기위해 우리는 두가지가 필요하다.\n아무 코드를 어느 곳에나 있는 아무 코드로 연결할 방법 이를 가능한한 간단한 빌딩 블럭으로 만들어 유저들이 쉽게 이해하고 사용할 수 있어야 할 것 말도 안되게 간단해 보인다. 그리고 어쩌면 그럴 것도 같다. 이게 요점의 전부다.\nStarting Assumptions version: 3.2 zeromq.\nyou can read C code.\nwe write constants like PUSH or SUBSCRIBE, you can imagine they are really called ZMQ_PUSH or ZMQ_SUBSCRIBE if the programming language needs it.\nAsk and Ye Shall Receive 먼저 코드로 시작해보자. 물론 Hello World 예제부터. 클라이언트와 서버를 만든다. 클라이언트는 “Hello” 를 서버에 전송, “World” 라고 응답 받을 것이다.\n// // Hello World server in C++ // Binds REP socket to tcp://*:5555 // Expects \"Hello\" from client, replies with \"World\" // #include #include #include #ifndef _WIN32 #include #else #include #define sleep(n)\tSleep(n) #endif int main () { // Prepare our context and socket zmq::context_t context (2); zmq::socket_t socket (context, zmq::socket_type::rep); socket.bind (\"tcp://*:5555\"); while (true) { zmq::message_t request; // Wait for next request from client socket.recv (request, zmq::recv_flags::none); std::cout \u003c\u003c \"Received Hello\" \u003c\u003c std::endl; // Do some 'work' sleep(1); // Send reply back to client zmq::message_t reply (5); memcpy (reply.data (), \"World\", 5); socket.send (reply, zmq::send_flags::none); } return 0; } REQ-REP 소켓쌍은 시작점이다. 클라이언트는 zmq_send() 이후 zmq_recv() 를 하나의 루프에서 실행한다. 이 외의 어떤 다른 시퀀스(한번에 메시지를두번보낸다거나)\n는 응답값이-1 로 반환된다. 유사하게, 서비스는 zmq_recv() 이후 zmq_send() 를 보통 필요한 것처럼 순서대로 발행 한다.\n다른 언어에서도 유사하게 사용된다.\npackage guide; // // Hello World server in Java // Binds REP socket to tcp://*:5555 // Expects \"Hello\" from client, replies with \"World\" // import org.zeromq.SocketType; import org.zeromq.ZMQ; import org.zeromq.ZContext; public class hwserver { public static void main(String[] args) throws Exception { try (ZContext context = new ZContext()) { // Socket to talk to clients ZMQ.Socket socket = context.createSocket(SocketType.REP); socket.bind(\"tcp://*:5555\"); while (!Thread.currentThread().isInterrupted()) { byte[] reply = socket.recv(0); System.out.println( \"Received \" + \": [\" + new String(reply, ZMQ.CHARSET) + \"]\" ); Thread.sleep(1000); // Do some 'work' String response = \"world\"; socket.send(response.getBytes(ZMQ.CHARSET), 0); } } } } ",
  "wordCount" : "474",
  "inLanguage": "en",
  "datePublished": "2024-05-22T21:37:29+09:00",
  "dateModified": "2024-05-22T21:37:29+09:00",
  "author":{
    "@type": "Person",
    "name": "nolleh"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://nolleh.github.io/zeromq/1.basics/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "The Computer Programmer, Nolleh",
    "logo": {
      "@type": "ImageObject",
      "url": "https://nolleh.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://nolleh.github.io/" accesskey="h" title="The Computer Programmer, Nolleh (Alt + H)">The Computer Programmer, Nolleh</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://nolleh.github.io/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://nolleh.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://nolleh.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://nolleh.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://nolleh.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://nolleh.github.io/zeromq/">Zeromqs</a></div>
    <h1 class="post-title entry-hint-parent">
      1.basics
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="35" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h1>
    <div class="post-meta"><span title='2024-05-22 21:37:29 +0900 KST'>May 22, 2024</span>&nbsp;·&nbsp;nolleh

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#chapter-1---basics" aria-label="Chapter 1 - Basics">Chapter 1 - Basics</a><ul>
                        
                <li>
                    <a href="#fixing-the-world" aria-label="Fixing The World">Fixing The World</a></li>
                <li>
                    <a href="#starting-assumptions" aria-label="Starting Assumptions">Starting Assumptions</a></li>
                <li>
                    <a href="#ask-and-ye-shall-receive" aria-label="Ask and Ye Shall Receive">Ask and Ye Shall Receive</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>다음 번역
<a href="https://zguide.zeromq.org/docs/chapter1/"></a></p>
<h1 id="chapter-1---basics">Chapter 1 - Basics<a hidden class="anchor" aria-hidden="true" href="#chapter-1---basics">#</a></h1>
<h2 id="fixing-the-world">Fixing The World<a hidden class="anchor" aria-hidden="true" href="#fixing-the-world">#</a></h2>
<p>프로그래밍의 물리요, 과학은: 사람들이 쉽게 이해하고 사용할 수 있는 빌딩블록을 만들고 함께 큰 문제를 해결하는 데에 있다.<br>
우리는 연결되어 있는 세상에 살고 있고 현대의 소프트웨어는 세상을 안내한다.</p>
<p>하지만 데이터와 지식들은 클라우드와 개인 컴퓨터에 존재하고 인터넷은 &lsquo;연결된&rsquo; 코드의 잠재성을 제안했지만<br>
현실은 많은 흥미로운 문제들(건강/교육/경제/..)이 코드를 &lsquo;연결&rsquo; 할 방법이 없기 때문에 많은 지식(brain) 을 연결하지 못해 해결되지 못한 채로 남아있다.</p>
<p>IETF 표준들과같은 많은 노력으로 코드를 연결하기 위한 시도들이 행해졌다.
어플리케이션 개발자들은 HTTP 를 하나의 솔루션으로 사용하여 &lsquo;간단한&rsquo; 문제에는 활용할 수 있겠지만<br>
이것은 개발자들과 아키텍트들이 큰서버를 생각하고 멍청한 클라이언트들을 구성하도록 격려하면서 문제를 더 악화했다.</p>
<p>그래서, 현재의 사람들은 여전히 raw UDP 와 raw TCP를 사용한다. 이는 고통스럽고, 느리고, 확장하기 어려우며 중앙화가 필수적이다.
분산P2P 아키텍쳐는 업무를 위해서가아니라대부분 play 를 위해 사용된다. 스카이프나 비트토렌트를 데이터를 교환하기위해 사용하는 어플리케이션이 몇이나 되겠는가?</p>
<p>이는 다시 프로그래밍의 과학을 다시우리에게 들이민다.  세상을 고치기위해 우리는 두가지가 필요하다.</p>
<ol>
<li>아무 코드를 어느 곳에나 있는 아무 코드로 연결할 방법</li>
<li>이를 가능한한 간단한 빌딩 블럭으로 만들어 유저들이 쉽게 이해하고 사용할 수 있어야 할 것</li>
</ol>
<p>말도 안되게 간단해 보인다. 그리고 어쩌면 그럴 것도 같다. 이게 요점의 전부다.</p>
<h2 id="starting-assumptions">Starting Assumptions<a hidden class="anchor" aria-hidden="true" href="#starting-assumptions">#</a></h2>
<p>version: 3.2 zeromq.<br>
you can read C code.<br>
we write constants like PUSH or SUBSCRIBE, you can imagine they are really called ZMQ_PUSH or ZMQ_SUBSCRIBE if the programming language needs it.</p>
<h2 id="ask-and-ye-shall-receive">Ask and Ye Shall Receive<a hidden class="anchor" aria-hidden="true" href="#ask-and-ye-shall-receive">#</a></h2>
<p>먼저 코드로 시작해보자. 물론 Hello World 예제부터. 클라이언트와 서버를 만든다. 클라이언트는 &ldquo;Hello&rdquo; 를 서버에 전송, &ldquo;World&rdquo; 라고 응답 받을 것이다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//  Hello World server in C++
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//  Binds REP socket to tcp://*:5555
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//  Expects &#34;Hello&#34; from client, replies with &#34;World&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;zmq.hpp&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#ifndef _WIN32
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;unistd.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#else
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;windows.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define sleep(n)	Sleep(n)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#endif
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//  Prepare our context and socket
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    zmq<span style="color:#f92672">::</span>context_t context (<span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>    zmq<span style="color:#f92672">::</span>socket_t socket (context, zmq<span style="color:#f92672">::</span>socket_type<span style="color:#f92672">::</span>rep);
</span></span><span style="display:flex;"><span>    socket.bind (<span style="color:#e6db74">&#34;tcp://*:5555&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (true) {
</span></span><span style="display:flex;"><span>        zmq<span style="color:#f92672">::</span>message_t request;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//  Wait for next request from client
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        socket.recv (request, zmq<span style="color:#f92672">::</span>recv_flags<span style="color:#f92672">::</span>none);
</span></span><span style="display:flex;"><span>        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Received Hello&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//  Do some &#39;work&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        sleep(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//  Send reply back to client
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        zmq<span style="color:#f92672">::</span>message_t reply (<span style="color:#ae81ff">5</span>);
</span></span><span style="display:flex;"><span>        memcpy (reply.data (), <span style="color:#e6db74">&#34;World&#34;</span>, <span style="color:#ae81ff">5</span>);
</span></span><span style="display:flex;"><span>        socket.send (reply, zmq<span style="color:#f92672">::</span>send_flags<span style="color:#f92672">::</span>none);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><img loading="lazy" src="https://zguide.zeromq.org/images/fig2.png" alt=""  />
</p>
<p>REQ-REP 소켓쌍은 시작점이다. 클라이언트는 <code>zmq_send()</code> 이후 <code>zmq_recv</code>() 를 하나의 루프에서 실행한다. 이 외의 어떤 다른 시퀀스(한번에 메시지를두번보낸다거나)<br>
는 응답값이-1 로 반환된다. 유사하게, 서비스는 <code>zmq_recv()</code> 이후 <code>zmq_send()</code> 를 보통 필요한 것처럼 순서대로 발행 한다.</p>
<p>다른 언어에서도 유사하게 사용된다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> guide<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//  Hello World server in Java
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//  Binds REP socket to tcp://*:5555
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//  Expects &#34;Hello&#34; from client, replies with &#34;World&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.zeromq.SocketType<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.zeromq.ZMQ<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.zeromq.ZContext<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">hwserver</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">(</span>ZContext context <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ZContext<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Socket to talk to clients
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            ZMQ<span style="color:#f92672">.</span><span style="color:#a6e22e">Socket</span> socket <span style="color:#f92672">=</span> context<span style="color:#f92672">.</span><span style="color:#a6e22e">createSocket</span><span style="color:#f92672">(</span>SocketType<span style="color:#f92672">.</span><span style="color:#a6e22e">REP</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            socket<span style="color:#f92672">.</span><span style="color:#a6e22e">bind</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;tcp://*:5555&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>Thread<span style="color:#f92672">.</span><span style="color:#a6e22e">currentThread</span><span style="color:#f92672">().</span><span style="color:#a6e22e">isInterrupted</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> reply <span style="color:#f92672">=</span> socket<span style="color:#f92672">.</span><span style="color:#a6e22e">recv</span><span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;Received &#34;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;: [&#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>reply<span style="color:#f92672">,</span> ZMQ<span style="color:#f92672">.</span><span style="color:#a6e22e">CHARSET</span><span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;]&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                Thread<span style="color:#f92672">.</span><span style="color:#a6e22e">sleep</span><span style="color:#f92672">(</span>1000<span style="color:#f92672">);</span> <span style="color:#75715e">//  Do some &#39;work&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>                String response <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;world&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                socket<span style="color:#f92672">.</span><span style="color:#a6e22e">send</span><span style="color:#f92672">(</span>response<span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">(</span>ZMQ<span style="color:#f92672">.</span><span style="color:#a6e22e">CHARSET</span><span style="color:#f92672">),</span> 0<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://nolleh.github.io/tags/mq/">MQ</a></li>
      <li><a href="https://nolleh.github.io/tags/zeromq/">zeromq</a></li>
    </ul>
  </footer>
<div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "nolleh-github-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://nolleh.github.io/">The Computer Programmer, Nolleh</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
